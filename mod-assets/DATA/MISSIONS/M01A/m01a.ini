# Meet in Space
# Fly to edge of north field
# some wrecks, Xenos spawn
# prototype ??? ship spawns, fights a bit, cloaks
# Fly back, dock with battleship
# Undock, take tradelane to gate con site.
# Fly into the field, capture xenos man, fly back
# intercepted on the way back
# dock with battleship
# end + freeplay

[Mission]
mission_title = 1
mission_offer = 1
reward = 20000
npc_ship_file = missions\M01A\m01_npcships.ini

# MISSION SOLARS
[MsnSolar]
nickname = bm_li_hf_wreck_1
system = Li03
position = 7324.081, 0, -44550.54, 1000
orientation = 1, 0, 0.2, 0
string_id = 217116
archetype = bm_wreck_li_hf

[MsnSolar]
nickname = bm_li_hf_wreck_2
system = Li03
position = 7404.081, 10, -44500.54, 1000
orientation = 1, 0.8, 1, 0
string_id = 217116
archetype = bm_wreck_li_hf

# MISSION SHIPS
[NPC]
nickname = chad_games_m01
space_costume = li_scrote_head, li_scrote_body, comm_li_hatcher
affiliation = li_lsf_grp
npc_ship_arch = chad_games_m01_d11
individual_name = 216000
voice = king

[MsnShip]
nickname = chad_escort
NPC = chad_games_m01
position = 31056, 0, -24757

[NPC]
nickname = basic_xenos
npc_ship_arch = xenos_scout_m01_d1-3
affiliation = fc_x_grp
space_costume = pi_pirate4_head, pi_pirate8_body, comm_pi_pirate

[MsnShip]
nickname = xenos_scout_01
NPC = basic_xenos
label = x_scouts
position = 46615.36, 0, -32818.652
random_name = true

[MsnShip]
nickname = xenos_scout_02
NPC = basic_xenos
label = x_scouts
position = 46615.36, 100, -32818.652
random_name = true

[NPC]
nickname = proto_fighter
npc_ship_arch = mystery_prototype_d19
affiliation = fc_x_grp

[MsnShip]
nickname = proto_fighter_ace
NPC = proto_fighter
label = x_proto
position = 7404.081, 100, -44500.54
individual_name = 216000

[NPC]
nickname = xenos_ambusher
npc_ship_arch = xenos_ambush_m01_d1-3
affiliation = fc_x_grp
space_costume = pi_pirate4_head, pi_pirate8_body, comm_pi_pirate

[MsnShip]
nickname = xenos_ambusher_01
NPC = xenos_ambusher
label = x_ambush
position = 4539.143, -215.871, -46455.28
random_name = true

[MsnShip]
nickname = xenos_ambusher_02
NPC = xenos_ambusher
label = x_ambush
position = 4539.143, -205.871, -46455.28
random_name = true

# FORMATIONS
[MsnFormation]
nickname = xenos_scouts
position = 46615.36, 200, -32818.652
formation = fighter_basic
ship = xenos_scout_01
ship = xenos_scout_02

[MsnFormation]
nickname = xenos_ambushers
position = 4539.143, -2215.871, -46455.28
formation = fighter_basic
ship = xenos_ambusher_01
ship = xenos_ambusher_02

#MISSION LOGIC START
[Trigger]
nickname = tr_initialize_init
InitState = ACTIVE
Cnd_True = no_params
Act_ActTrig = tr_tutorial_query

# Asks the player on new game if they'd like to do a short tutorial.
[Trigger]
nickname = tr_tutorial_query
Cnd_BaseEnter = Li03_01_Base
Act_AddRTC = missions\M01A\m01_tut_offer.ini
Act_ActTrig = mrp_accept
Act_ActTrig = mrp_reject

[NNObjective]
nickname = launch_space
state = HIDDEN
type = ids, 21810

[Trigger]
nickname = mrp_accept
Act_ActTrig = info_and_launch
Cnd_MsnResponse = accept
Act_RemoveRTC = missions\M01A\m01_tut_offer.ini
Act_SetNNObj = launch_space

[Trigger]
nickname = mrp_reject
Cnd_MsnResponse = reject
Act_RemoveRTC = missions\M01A\m01_tut_offer.ini

# Provides a popup box with some basic information about how to undock, prompts the player to launch into space to meet their contact.
[Trigger]
nickname = info_and_launch
Cnd_True = no_params
Act_Popupdialog = 21891, 21925, CLOSE
Act_ActTrig = tr_setscene

# Turns off ambient spawns in certain areas and docking, spawns our tutorial wingman, Chad Games. Probably play some dialog, then sets a waypoint
[Trigger]
nickname = tr_setscene
Cnd_SpaceEnter = no_params
system = Li03
Act_PlayerCanTradelane = false
Act_PlayerCanDock = false
Act_EnableManeuver = formation, false
Act_EnableManeuver = Dock, false
Act_SpawnShip = chad_escort
Act_ActTrig = tr_setwaypoint

# Probably play some dialog, sets a waypoint on the satellite and saves the game
[NNObjective]
nickname = wing_rendezvous
state = HIDDEN
type = rep_inst, Li03, 22225, 25225, -28267, 0, -30104, Li03_hackable_sat_12

[ObjList]
nickname = ol_chad_form_on_player
Avoidance = true
Follow = Player, 100000, 20, -15, -17

[Trigger]
nickname = tr_setwaypoint
Cnd_Timer = 10
Act_SetNNObj = wing_rendezvous
Act_GiveObjList = chad_escort, ol_chad_form_on_player
Act_ActTrig = prox_to_sat
Act_Save = prox_to_sat, 32205

[NNObjective]
nickname = retrieve_data
state = HIDDEN
type = ids, 21810

[Trigger]
nickname = prox_to_sat
Cnd_DistVec = inside, Player, 39923, 0, -32651, 1000
Act_SetNNState = wing_rendezvous, COMPLETE
Act_SetNNObj = retrieve_data
Act_ActTrig = start_data_pickup

[Trigger]
nickname = start_data_pickup
Cnd_Timer = 5
Act_LightFuse = Li03_hackable_sat_12, bm_hack_active_fuse
Act_ActTrig = create_xenos_encounter

[ObjList]
nickname = ol_attack_player
Avoidance = false
GotoShip = goto, Player, 2000, true, -1
SetPriority = NORMAL
BreakFormation = no_params

[Trigger]
nickname = create_xenos_encounter
Cnd_Timer = 10
Act_SpawnFormation = xenos_scouts
Act_GiveObjList = xenos_scouts, ol_attack_player
Act_ActTrig = create_wreck_solars
Act_ActTrig = set_alamosa_edge_objective

[Trigger]
nickname = create_wreck_solars
Cnd_Destroyed = x_scouts, -1
Act_SpawnSolar = bm_li_hf_wreck_1
Act_SpawnSolar = bm_li_hf_wreck_2
Act_SpawnShip = proto_fighter_ace
Act_Cloak = proto_fighter_ace, true

[NNObjective]
nickname = alamosa_rendezvous
state = HIDDEN
type = navmarker, Li03, 21880, 21800, 7424.081, 0, -44550.54

[Trigger]
nickname = set_alamosa_edge_objective
Cnd_True = no_params
Cnd_Timer = 5
Cnd_Destroyed = x_scouts, -1
Act_SetNNObj = alamosa_rendezvous
Act_ActTrig = alamosa_ambush
Act_PlayMusic = music_li_space, music_li_danger_deep, music_li_battle, music_li_danger_deep, 5

# Set up so when pair or ptoto is killed, the other flees

[Trigger]
nickname = alamosa_ambush
Cnd_DistVec = inside, Player, 7424.081, 0, -44550.54, 1000
Act_ActTrig = alamosa_ambush_decloak
Act_ActTrig = alamosa_ambush_proto_flee_damage
Act_ActTrig = alamosa_ambush_proto_flee_escorts_dead
Act_ActTrig = alamosa_ambush_spawn_xenos
Act_ActTrig = xenos_ambushers_flee

[Trigger]
nickname = alamosa_ambush_decloak
Cnd_Timer = 5
Act_Cloak = proto_fighter_ace, false
Act_PlaySoundEffect = cloak_no_fighter_srtc

[Trigger]
nickname = alamosa_ambush_proto_flee_damage
Cnd_Timer = 5
Cnd_HealthDec = proto_fighter_ace, 0.5
Act_Cloak = proto_fighter_ace, true
Act_PlaySoundEffect = cloak_no_fighter_srtc
Act_ActTrig = proto_cleanup

[Trigger]
nickname = alamosa_ambush_proto_flee_escorts_dead
Cnd_Timer = 5
Cnd_Destroyed = x_ambush, -1
Act_Cloak = proto_fighter_ace, true
Act_PlaySoundEffect = cloak_no_fighter_srtc
Act_ActTrig = proto_cleanup

[Trigger]
nickname = proto_cleanup
Cnd_Timer = 2
Act_Destroy = proto_fighter_ace, SILENT

[Trigger]
nickname = alamosa_ambush_spawn_xenos
Cnd_Timer = 10
Act_SpawnFormation = xenos_ambushers
Act_GiveObjList = xenos_ambush, ol_attack_player

[ObjList]
nickname = ol_flee_to_jh
Avoidance = true
GotoShip = goto_cruise, Li03_to_Iw06_hole, 800, false, 20
SetPriority = ALWAYS_EXECUTE
BreakFormation = no_params
Dock = Li03_to_Iw06_hole

[Trigger]
nickname = xenos_ambushers_flee
Cnd_Timer = 5
Cnd_Destroyed = x_proto
Act_GiveObjList = xenos_ambush, ol_flee_to_jh

#cnd destroyed for 2 xenos
#return to sat
#play sound

#new wp by north field
#spawn wrecks
#arrive at new wp, dialog
#spawn 2 xenos + super secret fighter
#when 1 xenos dead, fighter cloak + despawn
#return to rio when last fighter dead